#!/usr/bin/env python3

import argparse
import sys
import dawg


def main():
    parser = argparse.ArgumentParser()
    parser.add_argument('input', type=argparse.FileType('r'), default=sys.stdin)
    parser.add_argument('output', type=argparse.FileType('wb'), default=sys.stdout)
    args = parser.parse_args()

    rysin_dict2multext_dawg(args.input, args.output)


def rysin_dict2multext_dawg(inpu, outp):
    words = []
    lemma = ''
    for l in inpu:
        word, tags = l.strip().split(' ')
        if not l.startswith(' '):
            lemma = word
        words.append(word + ' ' + lemma + ' ' + tags)

    completion_dawg = dawg.CompletionDAWG(words)
    completion_dawg.write(outp)


if __name__ == '__main__':
    main()